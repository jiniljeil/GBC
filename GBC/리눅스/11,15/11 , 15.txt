네트워크의 기초
1. TCP/IP 프로토콜
  프로토콜 : 컴퓨터와 컴퓨터 사이에서 데이터를 어떻게 주고받을 것인지를 정의한 통신 규약
  즉 , 같은 프로토콜을 사용하는 기기 간에는 통신이 필요

  TCP/IP의 5계층 (사진 첨부)
  3~5계층은 IP 주소를 사용
  4 계층인 전송 계층(데이터가 정확하게 전달되도록 하는 계층)에서 사용하는 번호 : 포트 번호

2. 주소
   컴퓨터 주소 : MAC 주소 , IP 주소 , 호스트 명 

   MAC 주소 (media access control) = 이더넷 주소, 하드웨어 주소 , 물리 주소 / 네트워크 인터페이스에 저장된 주소 
   => 네트워크 인터페이스 카드에 저장된 주소
   역할 : 각 하드웨어를 구별하는 역할  / 6개의 16진수로 되어있음 = 48 비트
 
   IP 주소 (3~5계층, 인터넷 주소)  : 인터넷으로 연결된 네트워크에 각 컴퓨터를 구분하기 위해 사용
   => A 클래스 , B 클래스 , C 클래스로 구분 (네트워크 부분, 호스트 부분)  총 32 비트
  
   넷마스크 (서브넷 마스크)
   역할 : IP 주소에서 네트워크 부분과 호스트 부분을 구분해주는 역할
   기능 : 하나의 네트워크를 다시 작은 네트워크(서브넷)로 분리할 때도 사용
 
   포트 번호 
   네트워크 서비스를 구분하는 번호 
    
   호스트 이름
   사용자의 편의를 위해 각 장비에 붙인 이름 

   인터페이스 (+추가)
   서로 다른 두 개의 시스템, 장치 사이에서 정보나 신호를 주고받는 경우의 접점이나 경계면이다. (즉, 사용자가 기기를 쉽게 동작시키는데 도움을 주는 시스템을 의미)

   인터넷에 연결하기 위해 설정해야 할 주소 
   IP 주소 , 넷마스크와 브로드캐스트 주소, 게이트워이(라우터) 주소 , DNS 주소
   
   호스트 이름 확인하는 명령어 : hostname , uname -n
     
   uname [옵션] : 시스템 정보를 출력하는 명령어
   [옵션] -m : 하드웨어 종류를 출력
             -n : 호스트 이름을 출력
            - r : 운영체제의 릴리즈 정보를 출력
             -s : 운영체제의 이름을 출력
             -v : 운영체제의 버전을 출력
             -a : 위의 모든 정보를 출력

    호스트 이름을 저장하는 파일 : /etc/hostname
    한 네트워크에서 같은 이름을 사용하는 다른 호스트가 있으면 안 됨 !!
    
    네트워크 인터페이스 설정할 때 
    => IP 주소와 넷마스크 , 브로드캐스트 주소를 함께 설정
    명령어 : ifconfig [인터페이스명] [옵션] [값]
    옵션 -a : 시스템의 전체 인터페이스에 대한 정보를 출력
           -up/down : 인터페이스 활성화 , 비활성화 한다.
           -netmask 주소 : 넷마스크 주소 설정
           -broadcast 주소 : 브로드캐스트 주소 설정
  
    현재 설치된 네트워크 인터페이스 설정 확인 명령어 : ifconfig  (사진 첨부)
    lo(local loopback) : 시스템 내부 통신용
    ens33 : 시스템 외부 통신용 네트워크 인터페이스  
    RX : 부팅 후 현재까지 받은 패킷 수 와 바이트 수를 알려줌
    TX : 부팅 후 현재까지 보낸 패킷 수와 바이트 수를 알려줌
     
   게이트웨이(라우터) 설정하기
   네트워크를 다른 네트워크와 연결할 때 연결점이 되는 장치 
   
   게이트웨이의 연결 정보를 관리하는 라우팅 테이블을 편집하는 명령어 : route 명령
   명령 : add , del  : 라우팅 경로나 기본 게이트웨이 추가 , 삭제
   route : 라우팅 테이블 보기 명령어
   
   DNS( domain name service) 
   역할 : 호스트명을 IP 주소로 바꾸는 역할을 수행
   리눅스는 DNS 서버의 주소를 /etc/resolv.conf 파일에 저장
    
   DNS 서버와 대화식으로 질의하고 응답을 받는 명령어 : nslookup [도메인 명 ]
   특정 도메인의 주소를 검색하는 역할 ex) nslookup www.naver.com
   
   네트워크 상태 확인
   
   네트워크에 통신이 가능한지 확인하는 대표적인 명령어 : ping
   1. 외부와 통신되는지 확인할 때 
   2. 외부 서버가 동작하는지를 확인할 때
  
   형식 : ping  [옵션] 목적지 주소 
   기능 : 네트워크 장비에 신호를 보내는 기능
   옵션 : -a : 통신이 되면 소리를 낸다
             -q : 테스트 결과를 지속적으로 보여주지 않고 종합 결과만 출력
             -c 개수 : 보낼 패킷 수를 지정

   목적지 시스템까지의 네트워크 경로를 추적하는 명령어 : traceroute 목적지 주소
   기능 : 목적지까지 패킷이 거치는 경로를 출력
   
   중간에 거치는 IP 주소가 어느 기관의 것인지 알고 싶으면 whois 명령을 사용
   
   네트워크 상태 정보 출력하는 명령어 : netstat [옵션]
   옵션 : -a : 모든 소켓 정보를 출력
             -r : 라우팅 정보를 출력
             -n : 호스트명 대신에 IP 주소를 출력
              -i : 모든 네트워크 인터페이스 정보를 출력
              -s : 프로토콜별로 네트워크 통계 정보를 출력
              -p : 해당 소켓과 관련된 프로세스의 이름과 PID를 출력

   MAC 주소와 IP 주소 확인하는 명령어 : arp [IP 주소]
   네트워크에서 주고받는 패킷을 캡처하여 확인하는 명령어 : tcpdump [옵션]
   옵션 : -c : 캡처할 패킷 개수 지정하기 
            -w : 캡처한 패킷 정보를 파일로 저장
             -r : 캡처한 패킷 파일 읽기
             tcp port 번호 : 지정한 포트 번호 패킷만 덤프한다.
             -X : 캡처한 내용을 ASCII 로 보기

   정보 보안의 3요소 : 기밀성 , 무결성 , 가용성 유지 ! (CIA 삼각형)
   
   기밀성 : 허가받은 사용자만이 해당 정보에 접근할 수 있도록 하는 것
   무결성 : 정보가 무단으로 변조되지 않았음을 의미
   가용성 : 필요할 때 인가를 받은 사용자가 정보나 서비스에 접근할 수 있는 것을 말함.

   보안 기본 조치
   1. 불필요한 서비스 통제하기
   2. 소프트웨어 패치 실시하기
   3. 주기적으로 점검하기
   4. 백업하기
   5. 공부하는 시스템 관리자
  
   시스템 로그 
   로그 : 커널과 리눅스 시스템이 제공하는 여러 서비스와 응용 프로그램이 발생시키는 메세지 /  시스템의 상태를 알려주는 메세지
   로그 파일 : 로그를 저장하고 있는 파일 /var/log 디렉터리에 존재
   
   로그 관리 데몬
   리눅스 시스템의 로그 파일 중 일부는 로그 관리 데몬에 의해 통제됨.
   rsyslog 서비스를 제공하는 데몬 : /sbin/rsyslogd 
   rsyslog 서비스를 설정하는 파일 : /etc/rsyslog.conf 
   
   선택자 
   rsyslog의 선택자는 기능명과 우선순위를 기반으로 작성
  
   기능명 : 로그 메세지를 생성하는 프로그램을 지정한 것 (사진 첨부)
   우선 순위 : 메세지의 심각도를 나타냄. (사진 첨부)

   동작 : 선택자가 선택한 메세지를 어떻게 처리할 것인지를 정의 (사진 첨부)
   ex) 메세지를 파일로 저장하거나 메일로 전송하기, 화면으로 출력하기 등
   
   로그 관리 도구
   gnome-system-log (로그뷰어의 패키지 이름) : 로그를 관리할 수 있는 GUI 도구로 로그뷰어 제공
   
    
   방화벽 관리
   네트워크를 통한 외부의 접속을 차단하려면 방화벽을 사용해야함
   
   방화벽 동작 확인하기
   방화벽의 서비스 이름 : firewalld.service 즉 , systemctl status firewalld.service 명령을 통해 동작 여부를 확인
   
   GUI 도구로 방화벽 설정하기 
   firewall 데몬은 동적으로 방화벽을 관리할 수 있도록 하며 IPv4 , IPv6를 모두 지원
   방화벽을 동적으로 관리한다는 것은 언제든지 방화벽의 설정을 변경할 수 있다는 것으로 
   firewall-config 라는 방화벽을 관리하기 위한 GUI 도구를 통해 설정
   
   Current View
   현재 설정하는 내용을 바로 적용할 것인지를 결정하는 것 / 다른 사용자들에게도 영향을 미치므로 서비스를 열거나 닫을 때 주의 
   ex ) 서비스의 telnet 체크박스에 체크하면 바로 적용되는 것 
          Current View 값이 '방화벽 설정' 이라면 설정한 내용을 적용하기 위해 서비스나 시스템을 다시 시작해야함.
   
  영역 
  방화벽은 네트워크를 신뢰도 수준에 따라 여러 개의 영역으로 구분하여 사용할 수 있음.
  영역은 (사진첨부) 이 영역 중 하나를 기본 영역으로 지정할 수 있으며, 현재 기본 영역은 Public 임.
  
  방화벽 설정하기
  방화벽에서는 서비스, 포트 , 마스커레이딩, 포트 포워딩 , ICMP 필터를 설정할 수 있음.

  서비스 항목 : http , ssh , FTP 같은 이미 잘 알려져 있는 서비스 중 신뢰할 수 있는 서비스를 열거나 닫는 것
  포트 항목 : 서비스 목록에 없는 네트워크 서비스를 열어주기 위해 해당 서비스의 포트 번호를 직접 지정할 때 사용
  마스커 레이딩 : 내부의 IP 주소를 하나의 외부용 주소로 변환하는 것으로 리눅스 시스템을 라우터 기능으로 사용할 때 적용함.
  포트 포워딩 : 마스커레이딩과 함께 사용하는데, 외부에 들어오는 패킷을 내부 조소의 특정 포트로 전달하는 것
  ICMP 필터 : ICMP 프로토콜로 보내는 메세지에서 거부할 유형을 표시하는 것
  
  방화벽 관리 명령어 : firewall-cmd [옵션]
   옵션 : --get-defalut-zone : 기본 영역을 출력
             --add-ACTION : ACTION을 추가
             --remove-ACTION : ACTION을 제거
             --list-ports : 허용된 포트 목록을 출력
             --list-services : 허용된 서비스 목록을 출력
             --permanent : 방화벽에 저장. reload나 재시작을 해야 적용
  
  보안 관리 도구 
  로그 관리와 방화벽 설정 : 리눅스의 보안을 위해 가장 기본적으로 사용하는 도구 
  nmap : 네트워크 포트를 점검하는 도구
  PAM : 사용자 인증 관련 기능
  SELinux : 리눅스 보안을 강화한 도구
 
  NMap : 포트 스캔 도구
  기능 : 내 서버나 원격의 서버가 사용 중인 포트 , 운영체제 등을 스캔하여 출력
  네트워크 관리용으로도 사용되고 , 취약한 포트가 사용 중인지 확인 가능하여 보안용으로 사용
  주의 ! : 스캔하는 것만으로도 보안 침입을 위한 준비 과정으로 간주하므로 원격 서버를 마구 스캔해서는 안됌.
  
  네트워크를 탐색하고 보안을 점검하는 명령어 : nmap [옵션] 목적지 주소
  옵션 : -sS : TCP SYN을 스캔
            -sT : TCP 연결을 스캔
            -sP : ping을 스캔
            -sU : UDP를 스캔
            -sO : IP 프로토콜을 스캔
            -O   : 운영체제를 확인
            -v  : 스캔 결과를 상세하게 출력
            -p 포트번호 : 지정한 포트만 스캔
            -F : 빠른 모드로 기본 스캔보다 적은 수의 포트만 스캔
     
  PAM (삽입형 인증 모듈)
  사용자가 시스템의 서비스를 사용하는 데는 사용자의 신원을 확인하는 인증이 필요하므로 중앙 집중화된 인증 기법인 PAM을 사용
  모듈 방식으로 구성되어 있어 시스템 관리자가 필요에 따라 인증 모듈을 추가,삭제,편집 가능
  
  PAM 설정 파일 형식
  <모듈 인터페이스><제어 플래그><모듈 이름><모듈 인자>

  모듈 인터페이스
  -auth : 이 모듈은 사용자를 인증하는데 사용
  -account : 접근이 허용되는지를 확인
  -password : 사용자 계정 암호를 바꾸는데 사용
  -session : 사용자의 세션을 설정하고 관리
  
   제어 플래그 
   모든 PAM 모듈은 수행 후에 성공이나 실패를 생성하는데 제어플래그는 특정 모듈의 성공과 실패를 어떻게 처리할 것인지를 알려줌.
   -required : 해당 모듈은 인증을 계속하기 위해 반드시 성공해야함. 실패할 경우 사용자는 다른 모든 모듈의 테스트가 끝날 때 까지 결과를 받지 못함.
   -requisite : 인증을 계속하기 위해 반드시 성공해야함. 실패할 경우 사용자는 실패에 대한 메세지를 즉시 받음.
   -sufficient : 실패하면 이 모듈의 결과가 무시됨. 이 모듈을 성공하고 앞선 required 모듈 중 실패가 없으면 인증 성공을 리턴함.
   -optional : 이 모듈의 결과는 무시됨. 오직 해당 인터페이스에 다른 모듈이 없는 경우에만 인증에 성공하는데 필요하다. 

  모듈 이름
  삽입 가능한 것을 지정
  모듈 인자
  인증 과정에서 정보가 필요한 일부 모듈에 정보를 전달
  
  SELinux 
  침입자가 root 권한을 획득할 경우 시스템의 모든 부분이 해킹당할 수 있는 위험을 보완하기 위해 만들어짐.
  즉, 침입자가 특정 프로그램을 해킹하여 root 권한을 가졌더라도 다른 프로그램에서는 root 권한을 행사하지 못하도록 하는 것.

  SELinux  
  기능 :리눅스 커널에 강제 접근 제어(mandatory access control, MAC) 를 구현한 것으로 
  기존의 임의적 접근 제어(discretionary access control, DAC) 외에 추가적인 접근 제어를 함.
  객체 : 파일, 디렉터리, 장치
  주체 : 사용자, 프로세스 ,프로그램
  대부분 운영체제는 주체가 객체를 사용할 때 DAC를 적용
  
  SELinux 의 상태를 알려주는 명령어 : getenforce
  SELinux 의 상태를 변경하는 명령어 : setenforce
  
   
   

   
   
   
   
   
  